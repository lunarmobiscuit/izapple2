0000fe-0000ff   ; GLOBAL @TXTPTR
00ff00          ; GLOBAL @TXTROW
00ff01          ; GLOBAL @TXTPOS
00ff02          ; GLOBAL @TXTPGROWS
00ff03          ; GLOBAL @DISPMODE
00fe00          ; GLOBAL @TYPBUFFER
00fe50          ; GLOBAL @TYPBUFFER2
00fea0          ; GLOBAL @TYPBUFFER3
00c0f0          ; GLOBAL @DISK4_CMD
00c0f1          ; GLOBAL @DISK4_PARAM0
00c0f4          ; GLOBAL @DISK4_PARAM1
00c0f7          ; GLOBAL @DISK4_RET0
00c0fa          ; GLOBAL @DISK4_RET1
00c0fd          ; GLOBAL @DISK4_RET2
00c0ff          ; GLOBAL @DISK4_GO
00c800          ; GLOBAL @DISK4_RAM
00c700          ; GLOBAL @SLOT_7_ROM
00c800          ; GLOBAL @PR_RAM
002000          ; GLOBAL @LOADFILEHERE
000100          ; GLOBAL @INPBUFFER
000150          ; GLOBAL @INPBUFFER2
0001a0          ; GLOBAL @INPBUFFER3
000080-000081   ; GLOBAL @ScreenBase
000082          ; GLOBAL @CURSORX
000083          ; GLOBAL @CURSORY
000084          ; GLOBAL @LASTKEY
000085          ; GLOBAL @EDITING
000086          ; GLOBAL @NEWVALUEH
000087          ; GLOBAL @NEWVALUEL
000088-000089   ; GLOBAL @FILESIZE
00008a-00008b   ; GLOBAL @NFILEROWS

010000 ; SUB BINedit:
00d000          ; VAR @NPRM
00d001-00d003   ; VAR @CMD
00d004-00d006   ; VAR @FILENAME
010000 a9 00                               lda #$0               ; DISP_TEXT_1
010002 4f 5c 08 00 ff                      jsr.a24 ($ff0008)     ; os4_SetScreenMode
010007 a9 02                               lda #$2
010009 8d 00 ff                            sta $ff00             ; TXTROW
01000c 9c 01 ff                            stz $ff01             ; TXTPOS
01000f a2 00                               ldx #$0
010011 4f 5c 3e 00 ff                      jsr.a24 ($ff003e)     ; os4_ClearScreen
010016 a9 80                               lda #$80              ; DISP_TEXT_2
010018 4f 5c 08 00 ff                      jsr.a24 ($ff0008)     ; os4_SetScreenMode
01001d 4f 20 19 08 01                      jsr.a24 $010819       ; clearText2Screen
010022 64 82                               stz $82               ; CURSORX
010024 64 83                               stz $83               ; CURSORY
010026 64 85                               stz $85               ; EDITING
010028 64 86                               stz $86               ; NEWVALUEH
01002a 64 87                               stz $87               ; NEWVALUEL
01002c                 FOR1002c_start:
01002c                                 ;; FOR X = 0 TO 39 {
01002c a2 00                               ldx #$0
01002e                 FOR1002c_loop:
01002e 4f bd b6 08 01                      lda.a24 $0108b6,X     ; Header
010033 f0 0a                               beq +10               ; for1002c_end [1003f]
010035 09 80                               ora #$80
010037 9d 04 04                            sta $0404,X
01003a e8                                  inx
01003b e0 28                               cpx #$28
01003d d0 ef                               bne -17               ; FOR1002c_loop [1002e]
01003f                 FOR1002c_end:
01003f ad 00 d0                            lda $d000             ; NPRM
010042                                 ;; IF == {
010042 d0 0e                               bne +14               ; IF10042_else [10052]
010044 1f a9 00 04                         lda.w #$400
010048 1f 85 88                            sta.w $88             ; FILESIZE
01004b 4f 20 06 08 01                      jsr.a24 $010806       ; calculateRows
010050 80 05                               bra +5                ; IF10042_end [10057]
010052                 IF10042_else:
010052                                 ;; ELSE
010052 4f 20 71 04 01                      jsr.a24 $010471       ; DoLoad
010057                 IF10042_end:
010057 4f 20 e6 02 01                      jsr.a24 $0102e6       ; drawCursor
01005c 4f 20 93 07 01                      jsr.a24 $010793       ; ClearInputBuffers
010061                 LOOP10061_start:
010061                                 ;; LOOP {
010061                 LOOP10061_loop:
010061 4f 5c 0b 00 ff                      jsr.a24 ($ff000b)     ; os4_SetScreenBase
010066 ad 01 ff                            lda $ff01             ; TXTPOS
010069                                 ;; IF == {
010069 d0 13                               bne +19               ; IF10069_end [1007e]
01006b a9 c2                               lda #$c2
01006d 4f 5c 11 00 ff                      jsr.a24 ($ff0011)     ; os4_PrintChar
010072 a9 ba                               lda #$ba
010074 4f 5c 11 00 ff                      jsr.a24 ($ff0011)     ; os4_PrintChar
010079 4f 5c 17 00 ff                      jsr.a24 ($ff0017)     ; os4_PrintCursor
01007e                 IF10069_end:
01007e                 LOOP1007e_start:
01007e                                 ;; LOOP {
01007e                 LOOP1007e_loop:
01007e 2c 00 c0                            bit $c000             ; KBD
010081                                 ;; IF - {
010081 10 04                               bpl +4                ; IF10081_end [10087]
010083                                 ;; BREAK
010083 4f 80 02 00                         bra.a24 +2            ; loop1007e_end [10089]
010087                 IF10081_end:
010087 80 f5                               bra -11               ; LOOP1007e_loop [1007e]
010089                 LOOP1007e_end:
010089 ad 00 c0                            lda $c000             ; KBD
01008c 85 84                               sta $84               ; LASTKEY
01008e 2c 10 c0                            bit $c010             ; KBDSTRB
010091                                 ;; IF == 141 {
010091 c9 8d                               cmp #$8d
010093 d0 55                               bne +85               ; IF10091_end [100ea]
010095 a5 85                               lda $85               ; EDITING
010097                                 ;; IF != {
010097 f0 13                               beq +19               ; IF10097_else [100ac]
010099 4f 20 82 03 01                      jsr.a24 $010382       ; storeNewValue
01009e 4f 20 d2 02 01                      jsr.a24 $0102d2       ; endEditing
0100a3 4f 20 5d 03 01                      jsr.a24 $01035d       ; hideEditCursor
0100a8                                 ;; CONTINUE
0100a8 80 b7                               bra -73               ; loop10061_start [10061]
0100aa 80 3a                               bra +58               ; IF10097_end [100e6]
0100ac                 IF10097_else:
0100ac                                 ;; ELSE
0100ac ad 01 ff                            lda $ff01             ; TXTPOS
0100af c9 02                               cmp #$2
0100b1                                 ;; IF == {
0100b1 d0 09                               bne +9                ; IF100b1_else [100bc]
0100b3 4f 20 aa 02 01                      jsr.a24 $0102aa       ; startEditing
0100b8                                 ;; CONTINUE
0100b8 80 a7                               bra -89               ; loop10061_start [10061]
0100ba 80 2a                               bra +42               ; IF100b1_end [100e6]
0100bc                 IF100b1_else:
0100bc                                 ;; ELSE
0100bc 4f 5c 1a 00 ff                      jsr.a24 ($ff001a)     ; os4_ClearCursor
0100c1 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
0100c6 4f 20 c4 07 01                      jsr.a24 $0107c4       ; CurrentToPrevInputBuffer
0100cb 9c ff d0                            stz $d0ff
0100ce 4f 20 bb 06 01                      jsr.a24 $0106bb       ; CommandLine
0100d3 8d ff d0                            sta $d0ff
0100d6 4f 20 a1 07 01                      jsr.a24 $0107a1       ; ClearCurrentInputBuffer
0100db ad ff d0                            lda $d0ff
0100de                                 ;; IF == 255 {
0100de c9 ff                               cmp #$ff
0100e0 d0 04                               bne +4                ; IF100de_end [100e6]
0100e2 a9 00                               lda #$0
0100e4 4f 60                               rts.a24
0100e6                 IF100de_end:
0100e6                 IF100b1_end:
0100e6                 IF10097_end:
0100e6                                 ;; CONTINUE
0100e6 4f 80 77 ff                         bra.a24 -137          ; loop10061_start [10061]
0100ea                 IF10091_end:
0100ea                                 ;; IF == 255 {
0100ea c9 ff                               cmp #$ff
0100ec d0 45                               bne +69               ; IF100ea_end [10133]
0100ee a5 85                               lda $85               ; EDITING
0100f0                                 ;; IF != {
0100f0 f0 19                               beq +25               ; IF100f0_else [1010b]
0100f2 a5 87                               lda $87               ; NEWVALUEL
0100f4                                 ;; IF != {
0100f4 f0 04                               beq +4                ; IF100f4_else [100fa]
0100f6 64 87                               stz $87               ; NEWVALUEL
0100f8 80 06                               bra +6                ; IF100f4_end [10100]
0100fa                 IF100f4_else:
0100fa                                 ;; ELSE
0100fa a5 86                               lda $86               ; NEWVALUEH
0100fc                                 ;; IF != {
0100fc f0 02                               beq +2                ; IF100fc_end [10100]
0100fe 64 86                               stz $86               ; NEWVALUEH
010100                 IF100fc_end:
010100                 IF100f4_end:
010100 4f 20 30 03 01                      jsr.a24 $010330       ; showEditCursor
010105                                 ;; CONTINUE
010105 4f 80 58 ff                         bra.a24 -168          ; loop10061_start [10061]
010109 80 28                               bra +40               ; IF100f0_end [10133]
01010b                 IF100f0_else:
01010b                                 ;; ELSE
01010b ad 01 ff                            lda $ff01             ; TXTPOS
01010e                                 ;; IF > 2 {
01010e c9 02                               cmp #$2
010110 f0 1d                               beq +29               ; IF1010e_end [1012f]
010112 90 1b                               bcc +27               ; IF1010e_end [1012f]
010114 4f 5c 1a 00 ff                      jsr.a24 ($ff001a)     ; os4_ClearCursor
010119 a9 a0                               lda #$a0
01011b ac 01 ff                            ldy $ff01             ; TXTPOS
01011e 88                                  dey
01011f 91 fe                               sta ($fe),Y           ; TXTPTR
010121 88                                  dey
010122 a9 00                               lda #$0
010124 99 00 01                            sta $0100,Y           ; INPBUFFER
010127 ce 01 ff                            dec $ff01             ; TXTPOS
01012a 4f 5c 17 00 ff                      jsr.a24 ($ff0017)     ; os4_PrintCursor
01012f                 IF1010e_end:
01012f                                 ;; CONTINUE
01012f 4f 80 2e ff                         bra.a24 -210          ; loop10061_start [10061]
010133                 IF100f0_end:
010133                 IF100ea_end:
010133                                 ;; IF == 137 {
010133 c9 89                               cmp #$89
010135 d0 12                               bne +18               ; IF10133_end [10149]
010137 a5 85                               lda $85               ; EDITING
010139                                 ;; IF != {
010139 f0 05                               beq +5                ; IF10139_end [10140]
01013b 4f 20 d2 02 01                      jsr.a24 $0102d2       ; endEditing
010140                 IF10139_end:
010140 4f 20 2a 07 01                      jsr.a24 $01072a       ; CompleteCommand
010145                                 ;; CONTINUE
010145 4f 80 18 ff                         bra.a24 -232          ; loop10061_start [10061]
010149                 IF10133_end:
010149                                 ;; IF == 154 {
010149 c9 9a                               cmp #$9a
01014b d0 20                               bne +32               ; IF10149_end [1016d]
01014d a5 85                               lda $85               ; EDITING
01014f                                 ;; IF != {
01014f f0 09                               beq +9                ; IF1014f_end [1015a]
010151 4f 20 d2 02 01                      jsr.a24 $0102d2       ; endEditing
010156                                 ;; CONTINUE
010156 4f 80 07 ff                         bra.a24 -249          ; loop10061_start [10061]
01015a                 IF1014f_end:
01015a 4f 20 af 07 01                      jsr.a24 $0107af       ; PrevToCurrentInputBuffer
01015f 4f 20 d9 07 01                      jsr.a24 $0107d9       ; InputBufferToTextScreen
010164 4f 5c 17 00 ff                      jsr.a24 ($ff0017)     ; os4_PrintCursor
010169                                 ;; CONTINUE
010169 4f 80 f4 fe                         bra.a24 -268          ; loop10061_start [10061]
01016d                 IF10149_end:
01016d                                 ;; IF == 155 {
01016d c9 9b                               cmp #$9b
01016f d0 16                               bne +22               ; IF1016d_end [10187]
010171 ad 03 ff                            lda $ff03             ; DISPMODE
010174 c9 00                               cmp #$0               ; DISP_TEXT_1
010176                                 ;; IF == {
010176 d0 04                               bne +4                ; IF10176_else [1017c]
010178 a9 80                               lda #$80              ; DISP_TEXT_2
01017a 80 02                               bra +2                ; IF10176_end [1017e]
01017c                 IF10176_else:
01017c                                 ;; ELSE
01017c a9 00                               lda #$0               ; DISP_TEXT_1
01017e                 IF10176_end:
01017e 4f 5c 08 00 ff                      jsr.a24 ($ff0008)     ; os4_SetScreenMode
010183                                 ;; CONTINUE
010183 4f 80 da fe                         bra.a24 -294          ; loop10061_start [10061]
010187                 IF1016d_end:
010187                                 ;; IF == 136 {
010187 c9 88                               cmp #$88
010189 d0 26                               bne +38               ; IF10187_end [101b1]
01018b a5 85                               lda $85               ; EDITING
01018d                                 ;; IF != {
01018d f0 09                               beq +9                ; IF1018d_end [10198]
01018f 4f 20 d2 02 01                      jsr.a24 $0102d2       ; endEditing
010194                                 ;; CONTINUE
010194 4f 80 c9 fe                         bra.a24 -311          ; loop10061_start [10061]
010198                 IF1018d_end:
010198 4f 20 0b 03 01                      jsr.a24 $01030b       ; hideCursor
01019d a5 82                               lda $82               ; CURSORX
01019f c9 00                               cmp #$0
0101a1                                 ;; IF > {
0101a1 f0 05                               beq +5                ; IF101a1_end [101a8]
0101a3 90 03                               bcc +3                ; IF101a1_end [101a8]
0101a5 3a                                  dec
0101a6 85 82                               sta $82               ; CURSORX
0101a8                 IF101a1_end:
0101a8 4f 20 e6 02 01                      jsr.a24 $0102e6       ; drawCursor
0101ad                                 ;; CONTINUE
0101ad 4f 80 b0 fe                         bra.a24 -336          ; loop10061_start [10061]
0101b1                 IF10187_end:
0101b1                                 ;; IF == 149 {
0101b1 c9 95                               cmp #$95
0101b3 d0 24                               bne +36               ; IF101b1_end [101d9]
0101b5 a5 85                               lda $85               ; EDITING
0101b7                                 ;; IF != {
0101b7 f0 09                               beq +9                ; IF101b7_end [101c2]
0101b9 4f 20 d2 02 01                      jsr.a24 $0102d2       ; endEditing
0101be                                 ;; CONTINUE
0101be 4f 80 9f fe                         bra.a24 -353          ; loop10061_start [10061]
0101c2                 IF101b7_end:
0101c2 4f 20 0b 03 01                      jsr.a24 $01030b       ; hideCursor
0101c7 a5 82                               lda $82               ; CURSORX
0101c9 c9 07                               cmp #$7
0101cb                                 ;; IF < {
0101cb b0 03                               bcs +3                ; IF101cb_end [101d0]
0101cd 1a                                  inc
0101ce 85 82                               sta $82               ; CURSORX
0101d0                 IF101cb_end:
0101d0 4f 20 e6 02 01                      jsr.a24 $0102e6       ; drawCursor
0101d5                                 ;; CONTINUE
0101d5 4f 80 88 fe                         bra.a24 -376          ; loop10061_start [10061]
0101d9                 IF101b1_end:
0101d9                                 ;; IF == 139 {
0101d9 c9 8b                               cmp #$8b
0101db d0 26                               bne +38               ; IF101d9_end [10203]
0101dd a5 85                               lda $85               ; EDITING
0101df                                 ;; IF != {
0101df f0 09                               beq +9                ; IF101df_end [101ea]
0101e1 4f 20 d2 02 01                      jsr.a24 $0102d2       ; endEditing
0101e6                                 ;; CONTINUE
0101e6 4f 80 77 fe                         bra.a24 -393          ; loop10061_start [10061]
0101ea                 IF101df_end:
0101ea 4f 20 0b 03 01                      jsr.a24 $01030b       ; hideCursor
0101ef a5 83                               lda $83               ; CURSORY
0101f1 c9 00                               cmp #$0
0101f3                                 ;; IF > {
0101f3 f0 05                               beq +5                ; IF101f3_end [101fa]
0101f5 90 03                               bcc +3                ; IF101f3_end [101fa]
0101f7 3a                                  dec
0101f8 85 83                               sta $83               ; CURSORY
0101fa                 IF101f3_end:
0101fa 4f 20 e6 02 01                      jsr.a24 $0102e6       ; drawCursor
0101ff                                 ;; CONTINUE
0101ff 4f 80 5e fe                         bra.a24 -418          ; loop10061_start [10061]
010203                 IF101d9_end:
010203                                 ;; IF == 138 {
010203 c9 8a                               cmp #$8a
010205 d0 24                               bne +36               ; IF10203_end [1022b]
010207 a5 85                               lda $85               ; EDITING
010209                                 ;; IF != {
010209 f0 09                               beq +9                ; IF10209_end [10214]
01020b 4f 20 d2 02 01                      jsr.a24 $0102d2       ; endEditing
010210                                 ;; CONTINUE
010210 4f 80 4d fe                         bra.a24 -435          ; loop10061_start [10061]
010214                 IF10209_end:
010214 4f 20 0b 03 01                      jsr.a24 $01030b       ; hideCursor
010219 a5 83                               lda $83               ; CURSORY
01021b c5 8a                               cmp $8a               ; NFILEROWS
01021d                                 ;; IF < {
01021d b0 03                               bcs +3                ; IF1021d_end [10222]
01021f 1a                                  inc
010220 85 83                               sta $83               ; CURSORY
010222                 IF1021d_end:
010222 4f 20 e6 02 01                      jsr.a24 $0102e6       ; drawCursor
010227                                 ;; CONTINUE
010227 4f 80 36 fe                         bra.a24 -458          ; loop10061_start [10061]
01022b                 IF10203_end:
01022b                                 ;; IF > 159 {
01022b c9 9f                               cmp #$9f
01022d f0 29                               beq +41               ; IF1022b_end [10258]
01022f 90 27                               bcc +39               ; IF1022b_end [10258]
010231 a5 85                               lda $85               ; EDITING
010233                                 ;; IF != {
010233 f0 07                               beq +7                ; IF10233_else [1023c]
010235 4f 20 5c 02 01                      jsr.a24 $01025c       ; enterKeyWhileEditing
01023a 80 1c                               bra +28               ; IF10233_end [10258]
01023c                 IF10233_else:
01023c                                 ;; ELSE
01023c a5 84                               lda $84               ; LASTKEY
01023e ac 01 ff                            ldy $ff01             ; TXTPOS
010241 4f 5c 11 00 ff                      jsr.a24 ($ff0011)     ; os4_PrintChar
010246 c0 28                               cpy #$28
010248                                 ;; IF < {
010248 b0 0e                               bcs +14               ; IF10248_end [10258]
01024a a5 84                               lda $84               ; LASTKEY
01024c 29 7f                               and #$7f
01024e 88                                  dey
01024f 88                                  dey
010250 99 00 01                            sta $0100,Y           ; INPBUFFER
010253 4f 5c 17 00 ff                      jsr.a24 ($ff0017)     ; os4_PrintCursor
010258                 IF10248_end:
010258                 IF10233_end:
010258                 IF1022b_end:
010258 4f 80 05 fe                         bra.a24 -507          ; LOOP10061_loop [10061]
01025c                 LOOP10061_end:

01025c ; SUB enterKeyWhileEditing:
01025c a5 84                               lda $84               ; LASTKEY
01025e c9 30                               cmp #$30
010260                                 ;; IF >= {
010260 90 2d                               bcc +45               ; IF10260_end [1028f]
010262 c9 39                               cmp #$39
010264                                 ;; IF <= {
010264 f0 02                               beq +2                ; IF10264_end_eq [10268]
010266 b0 07                               bcs +7                ; IF10264_else [1026f]
010268                 IF10264_end_eq:
010268 4f 20 91 02 01                      jsr.a24 $010291       ; processKeyWhileEditing
01026d 80 20                               bra +32               ; IF10264_end [1028f]
01026f                 IF10264_else:
01026f                                 ;; ELSE
01026f c9 41                               cmp #$41
010271                                 ;; IF >= {
010271 90 1c                               bcc +28               ; IF10271_end [1028f]
010273 c9 46                               cmp #$46
010275                                 ;; IF <= {
010275 f0 02                               beq +2                ; IF10275_end_eq [10279]
010277 b0 07                               bcs +7                ; IF10275_else [10280]
010279                 IF10275_end_eq:
010279 4f 20 91 02 01                      jsr.a24 $010291       ; processKeyWhileEditing
01027e 80 0f                               bra +15               ; IF10275_end [1028f]
010280                 IF10275_else:
010280                                 ;; ELSE
010280 c9 61                               cmp #$61
010282                                 ;; IF >= {
010282 90 0b                               bcc +11               ; IF10282_end [1028f]
010284 c9 66                               cmp #$66
010286                                 ;; IF <= {
010286 f0 02                               beq +2                ; IF10286_end_eq [1028a]
010288 b0 05                               bcs +5                ; IF10286_end [1028f]
01028a                 IF10286_end_eq:
01028a 4f 20 91 02 01                      jsr.a24 $010291       ; processKeyWhileEditing
01028f                 IF10286_end:
01028f                 IF10282_end:
01028f                 IF10275_end:
01028f                 IF10271_end:
01028f                 IF10264_end:
01028f                 IF10260_end:
01028f 4f 60                               rts.a24

010291 ; SUB processKeyWhileEditing:
010291 a5 86                               lda $86               ; NEWVALUEH
010293                                 ;; IF == {
010293 d0 06                               bne +6                ; IF10293_else [1029b]
010295 a5 84                               lda $84               ; LASTKEY
010297 85 86                               sta $86               ; NEWVALUEH
010299 80 08                               bra +8                ; IF10293_end [102a3]
01029b                 IF10293_else:
01029b                                 ;; ELSE
01029b a5 87                               lda $87               ; NEWVALUEL
01029d                                 ;; IF == {
01029d d0 04                               bne +4                ; IF1029d_end [102a3]
01029f a5 84                               lda $84               ; LASTKEY
0102a1 85 87                               sta $87               ; NEWVALUEL
0102a3                 IF1029d_end:
0102a3                 IF10293_end:
0102a3 4f 20 30 03 01                      jsr.a24 $010330       ; showEditCursor
0102a8 4f 60                               rts.a24

0102aa ; SUB startEditing:
0102aa ae 00 ff                            ldx $ff00             ; TXTROW
0102ad 4f 5c 3b 00 ff                      jsr.a24 ($ff003b)     ; os4_ClearRow
0102b2 9c 01 ff                            stz $ff01             ; TXTPOS
0102b5 2f a9 d7 08 01                      lda.t #$108d7         ; EditingStr
0102ba 2f 8d 00 d7                         sta.t $00d700
0102be 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
0102c3 64 86                               stz $86               ; NEWVALUEH
0102c5 64 87                               stz $87               ; NEWVALUEL
0102c7 a9 01                               lda #$1
0102c9 85 85                               sta $85               ; EDITING
0102cb 4f 20 30 03 01                      jsr.a24 $010330       ; showEditCursor
0102d0 4f 60                               rts.a24

0102d2 ; SUB endEditing:
0102d2 ae 00 ff                            ldx $ff00             ; TXTROW
0102d5 4f 5c 3b 00 ff                      jsr.a24 ($ff003b)     ; os4_ClearRow
0102da 9c 01 ff                            stz $ff01             ; TXTPOS
0102dd 64 85                               stz $85               ; EDITING
0102df 4f 20 5d 03 01                      jsr.a24 $01035d       ; hideEditCursor
0102e4 4f 60                               rts.a24

0102e6 ; SUB drawCursor:
0000fb-0000fc   ; VAR @ROWPTR
0000fa          ; VAR @CURXPOS
0102e6 a5 83                               lda $83               ; CURSORY
0102e8 0a                                  asl
0102e9 aa                                  tax
0102ea 5f bd cf 09 01                      lda.w.a24 $0109cf,X   ; Text2ScreenBase
0102ef 1f 85 fb                            sta.w $fb             ; ROWPTR
0102f2 18                                  clc
0102f3 a5 82                               lda $82               ; CURSORX
0102f5 65 82                               adc $82               ; CURSORX
0102f7 65 82                               adc $82               ; CURSORX
0102f9 69 08                               adc #$8
0102fb a8                                  tay
0102fc b1 fb                               lda ($fb),Y           ; ROWPTR
0102fe 29 3f                               and #$3f
010300 91 fb                               sta ($fb),Y           ; ROWPTR
010302 c8                                  iny
010303 b1 fb                               lda ($fb),Y           ; ROWPTR
010305 29 3f                               and #$3f
010307 91 fb                               sta ($fb),Y           ; ROWPTR
010309 4f 60                               rts.a24

01030b ; SUB hideCursor:
0000fb-0000fc   ; VAR @ROWPTR
0000fa          ; VAR @CURXPOS
01030b a5 83                               lda $83               ; CURSORY
01030d 0a                                  asl
01030e aa                                  tax
01030f 5f bd cf 09 01                      lda.w.a24 $0109cf,X   ; Text2ScreenBase
010314 1f 85 fb                            sta.w $fb             ; ROWPTR
010317 18                                  clc
010318 a5 82                               lda $82               ; CURSORX
01031a 65 82                               adc $82               ; CURSORX
01031c 65 82                               adc $82               ; CURSORX
01031e 69 08                               adc #$8
010320 a8                                  tay
010321 b1 fb                               lda ($fb),Y           ; ROWPTR
010323 09 80                               ora #$80
010325 91 fb                               sta ($fb),Y           ; ROWPTR
010327 c8                                  iny
010328 b1 fb                               lda ($fb),Y           ; ROWPTR
01032a 09 80                               ora #$80
01032c 91 fb                               sta ($fb),Y           ; ROWPTR
01032e 4f 60                               rts.a24

010330 ; SUB showEditCursor:
0000fb-0000fc   ; VAR @ROWPTR
0000fa          ; VAR @CURXPOS
010330 a5 83                               lda $83               ; CURSORY
010332 0a                                  asl
010333 aa                                  tax
010334 5f bd cf 09 01                      lda.w.a24 $0109cf,X   ; Text2ScreenBase
010339 1f 85 fb                            sta.w $fb             ; ROWPTR
01033c 18                                  clc
01033d a5 82                               lda $82               ; CURSORX
01033f 65 82                               adc $82               ; CURSORX
010341 65 82                               adc $82               ; CURSORX
010343 69 08                               adc #$8
010345 a8                                  tay
010346 a5 86                               lda $86               ; NEWVALUEH
010348                                 ;; IF == {
010348 d0 04                               bne +4                ; IF10348_end [1034e]
01034a a9 2a                               lda #$2a
01034c 29 3f                               and #$3f
01034e                 IF10348_end:
01034e 91 fb                               sta ($fb),Y           ; ROWPTR
010350 c8                                  iny
010351 a5 87                               lda $87               ; NEWVALUEL
010353                                 ;; IF == {
010353 d0 04                               bne +4                ; IF10353_end [10359]
010355 a9 2a                               lda #$2a
010357 29 3f                               and #$3f
010359                 IF10353_end:
010359 91 fb                               sta ($fb),Y           ; ROWPTR
01035b 4f 60                               rts.a24

01035d ; SUB hideEditCursor:
0000fb-0000fc   ; VAR @ROWPTR
0000fa          ; VAR @CURXPOS
01035d a5 83                               lda $83               ; CURSORY
01035f 0a                                  asl
010360 aa                                  tax
010361 5f bd cf 09 01                      lda.w.a24 $0109cf,X   ; Text2ScreenBase
010366 1f 85 fb                            sta.w $fb             ; ROWPTR
010369 18                                  clc
01036a a5 82                               lda $82               ; CURSORX
01036c 65 82                               adc $82               ; CURSORX
01036e 65 82                               adc $82               ; CURSORX
010370 69 08                               adc #$8
010372 a8                                  tay
010373 b1 fb                               lda ($fb),Y           ; ROWPTR
010375 09 80                               ora #$80
010377 91 fb                               sta ($fb),Y           ; ROWPTR
010379 c8                                  iny
01037a b1 fb                               lda ($fb),Y           ; ROWPTR
01037c 09 80                               ora #$80
01037e 91 fb                               sta ($fb),Y           ; ROWPTR
010380 4f 60                               rts.a24

010382 ; SUB storeNewValue:
010382 4f 60                               rts.a24

010384 ; SUB DoHelp:
000004          ; VAR @I
000005          ; VAR @I6
000006          ; VAR @COL
010384 4f 5c 2f 00 ff                      jsr.a24 ($ff002f)     ; os4_ResetPaginate
010389 a9 16                               lda #$16              ; PAGINATE_LINES_PER_PAGE
01038b 8d 00 d7                            sta $d700
01038e 4f 5c 32 00 ff                      jsr.a24 ($ff0032)     ; os4_PaginateLine
010393 2f a9 f9 08 01                      lda.t #$108f9         ; HelpUDLRStr
010398 2f 8d 00 d7                         sta.t $00d700
01039c 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
0103a1 a9 16                               lda #$16              ; PAGINATE_LINES_PER_PAGE
0103a3 8d 00 d7                            sta $d700
0103a6 4f 5c 32 00 ff                      jsr.a24 ($ff0032)     ; os4_PaginateLine
0103ab 2f a9 e5 08 01                      lda.t #$108e5         ; HelpEditStr
0103b0 2f 8d 00 d7                         sta.t $00d700
0103b4 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
0103b9 a9 16                               lda #$16              ; PAGINATE_LINES_PER_PAGE
0103bb 8d 00 d7                            sta $d700
0103be 4f 5c 32 00 ff                      jsr.a24 ($ff0032)     ; os4_PaginateLine
0103c3 4f 5c 32 00 ff                      jsr.a24 ($ff0032)     ; os4_PaginateLine
0103c8 2f a9 1b 09 01                      lda.t #$1091b         ; HelpListStr
0103cd 2f 8d 00 d7                         sta.t $00d700
0103d1 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
0103d6 a9 16                               lda #$16              ; PAGINATE_LINES_PER_PAGE
0103d8 8d 00 d7                            sta $d700
0103db 4f 5c 32 00 ff                      jsr.a24 ($ff0032)     ; os4_PaginateLine
0103e0 4f 5c 32 00 ff                      jsr.a24 ($ff0032)     ; os4_PaginateLine
0103e5                       ;; M@$4 = 1 
0103e5 85 00                               sta $00
0103e7 a9 01                               lda #$1
0103e9 85 04                               sta $04
0103eb a5 00                               lda $00
0103ed                       ;; M@$6 = 0 
0103ed 85 00                               sta $00
0103ef a9 00                               lda #$0
0103f1 85 06                               sta $06
0103f3 a5 00                               lda $00
0103f5                 DO103f5_start:
0103f5                                 ;; DO {
0103f5                 DO103f5_loop:
0103f5 4f 5c 14 00 ff                      jsr.a24 ($ff0014)     ; os4_PrintSpace
0103fa a5 04                               lda $04               ; I
0103fc                       ;; A <<= 2 
0103fc 0a                                  asl
0103fd 0a                                  asl
0103fe 85 05                               sta $05               ; I6
010400 a5 04                               lda $04               ; I
010402                       ;; A <<= 1 
010402 0a                                  asl
010403 18                                  clc
010404 65 05                               adc $05               ; I6
010406 85 05                               sta $05               ; I6
010408 aa                                  tax
010409 6f bd 15 0a 01                      lda.t.a24 $010a15,X   ; CommandList
01040e 2f 8d 00 d7                         sta.t $00d700
010412 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
010417 a5 06                               lda $06               ; COL
010419                                 ;; IF == {
010419 d0 13                               bne +19               ; IF10419_else [1042e]
01041b                       ;; M@$6 = 1 
01041b 85 00                               sta $00
01041d a9 01                               lda #$1
01041f 85 06                               sta $06
010421 a5 00                               lda $00
010423                       ;; M@$ff01 = 12 
010423 85 00                               sta $00
010425 a9 0c                               lda #$c
010427 8d 01 ff                            sta $ff01
01042a a5 00                               lda $00
01042c 80 2b                               bra +43               ; IF10419_end [10459]
01042e                 IF10419_else:
01042e                                 ;; ELSE
01042e                                 ;; IF == 1 {
01042e c9 01                               cmp #$1
010430 d0 11                               bne +17               ; IF1042e_end [10443]
010432                       ;; M@$6 = 2 
010432 85 00                               sta $00
010434 a9 02                               lda #$2
010436 85 06                               sta $06
010438 a5 00                               lda $00
01043a                       ;; M@$ff01 = 24 
01043a 85 00                               sta $00
01043c a9 18                               lda #$18
01043e 8d 01 ff                            sta $ff01
010441 a5 00                               lda $00
010443                 IF1042e_end:
010443                                 ;; IF == 2 {
010443 c9 02                               cmp #$2
010445 d0 12                               bne +18               ; IF10443_end [10459]
010447                       ;; M@$6 = 0 
010447 85 00                               sta $00
010449 a9 00                               lda #$0
01044b 85 06                               sta $06
01044d a5 00                               lda $00
01044f a9 16                               lda #$16              ; PAGINATE_LINES_PER_PAGE
010451 8d 00 d7                            sta $d700
010454 4f 5c 32 00 ff                      jsr.a24 ($ff0032)     ; os4_PaginateLine
010459                 IF10443_end:
010459                 IF10419_end:
010459 e6 04                               inc $04               ; I
01045b a5 04                               lda $04               ; I
01045d                                 ;; WHILE < 6
01045d c9 06                               cmp #$6
01045f b0 02                               bcs +2                ; DO103f5_end [10463]
010461 80 92                               bra -110              ; DO103f5_loop [103f5]
010463                 DO103f5_end:
010463 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
010468 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
01046d a9 00                               lda #$0
01046f 4f 60                               rts.a24

010471 ; SUB DoLoad:
00d000          ; VAR @NPRM
00d001          ; VAR @CMD
00d004          ; VAR @FILENAME
000003          ; VAR @FN
000004-000006   ; VAR @R_IDX
000007-000008   ; VAR @ACTUAL
000009-00000a   ; VAR @C_IDX
010471 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
010476 ad 00 d0                            lda $d000             ; NPRM
010479                                 ;; IF < 1 {
010479 c9 01                               cmp #$1
01047b b0 10                               bcs +16               ; IF10479_end [1048d]
01047d 2f a9 5f 09 01                      lda.t #$1095f         ; NoFilenameErrStr
010482 2f 8d 00 d7                         sta.t $00d700
010486 4f 5c 20 00 ff                      jsr.a24 ($ff0020)     ; os4_PrintError
01048b 4f 60                               rts.a24
01048d                 IF10479_end:
01048d 2f ad 04 d0                         lda.t $00d004         ; FILENAME
010491                                 ;; IF == {
010491 d0 0d                               bne +13               ; IF10491_end [104a0]
010493 2f a9                               lda.t #$1095f         ; NoFilenameErrStr
010495 2f 8d 00 d7                         sta.t $00d700
010499 4f 5c 20 00 ff                      jsr.a24 ($ff0020)     ; os4_PrintError
01049e 4f 60                               rts.a24
0104a0                 IF10491_end:
0104a0 2f 8d 00 d6                         sta.t $00d600
0104a4 4f 5c 0c 01 ff                      jsr.a24 ($ff010c)     ; os4_Disk4Open
0104a9                                 ;; IF != {
0104a9 f0 07                               beq +7                ; IF104a9_end [104b2]
0104ab 4f 5c 1b 01 ff                      jsr.a24 ($ff011b)     ; os4_Disk4PrintError
0104b0 4f 60                               rts.a24
0104b2                 IF104a9_end:
0104b2 86 03                               stx $03               ; FN
0104b4 8e f1 c0                            stx $c0f1             ; DISK4_PARAM0
0104b7 2f 64 04                            stz.t $04             ; R_IDX
0104ba                 LOOP104ba_start:
0104ba                                 ;; LOOP {
0104ba                 LOOP104ba_loop:
0104ba 4f 5c 12 01 ff                      jsr.a24 ($ff0112)     ; os4_Disk4Read
0104bf                                 ;; IF == 2 {
0104bf c9 02                               cmp #$2
0104c1 d0 04                               bne +4                ; IF104bf_end [104c7]
0104c3                                 ;; BREAK
0104c3 4f 80 39 00                         bra.a24 +57           ; loop104ba_end [10500]
0104c7                 IF104bf_end:
0104c7 2f ad f7 c0                         lda.t $00c0f7         ; DISK4_RET0
0104cb                                 ;; IF == {
0104cb d0 04                               bne +4                ; IF104cb_end [104d1]
0104cd                                 ;; BREAK
0104cd 4f 80 2f 00                         bra.a24 +47           ; loop104ba_end [10500]
0104d1                 IF104cb_end:
0104d1 1f 85 07                            sta.w $07             ; ACTUAL
0104d4 1f 64 09                            stz.w $09             ; C_IDX
0104d7                 LOOP104d7_start:
0104d7                                 ;; LOOP {
0104d7                 LOOP104d7_loop:
0104d7 1f a2 00 c8                         ldx.w #$c800          ; DISK4_RAM
0104db 1f a4 09                            ldy.w $09             ; C_IDX
0104de 4f ab                               lda.a24 XY
0104e0 2f e6 09                            inc.t $09             ; C_IDX
0104e3 2f a2 00 20 00                      ldx.t #$2000          ; LOADFILEHERE
0104e8 2f a4 04                            ldy.t $04             ; R_IDX
0104eb 4f bb                               sta.a24 XY
0104ed 2f e6 04                            inc.t $04             ; R_IDX
0104f0 1f a4 09                            ldy.w $09             ; C_IDX
0104f3 1f c4 07                            cpy.w $07             ; ACTUAL
0104f6                                 ;; IF == {
0104f6 d0 04                               bne +4                ; IF104f6_end [104fc]
0104f8                                 ;; BREAK
0104f8 4f 80 02 00                         bra.a24 +2            ; loop104d7_end [104fe]
0104fc                 IF104f6_end:
0104fc 80 d9                               bra -39               ; LOOP104d7_loop [104d7]
0104fe                 LOOP104d7_end:
0104fe 80 ba                               bra -70               ; LOOP104ba_loop [104ba]
010500                 LOOP104ba_end:
010500 1f a5 07                            lda.w $07             ; ACTUAL
010503 1f 85 88                            sta.w $88             ; FILESIZE
010506 4f 20 06 08 01                      jsr.a24 $010806       ; calculateRows
01050b a5 03                               lda $03               ; FN
01050d 4f 5c 0f 01 ff                      jsr.a24 ($ff010f)     ; os4_Disk4Close
010512 2f a9 2f 09 01                      lda.t #$1092f         ; LoadedStr
010517 2f 8d 00 d7                         sta.t $00d700
01051b 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
010520 2f ad 04 d0                         lda.t $00d004         ; FILENAME
010524 2f 8d 00 d7                         sta.t $00d700
010528 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
01052d 4f 5c 14 00 ff                      jsr.a24 ($ff0014)     ; os4_PrintSpace
010532 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
010537 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
01053c 4f 60                               rts.a24

01053e ; SUB DoStore:
00d000          ; VAR @NPRM
00d001          ; VAR @CMD
00d004          ; VAR @FILENAME
000003          ; VAR @FN
000004-000005   ; VAR @REMAINING
000007-000009   ; VAR @W_IDX
00000a-00000c   ; VAR @C_IDX
01053e 4f 20 0b 03 01                      jsr.a24 $01030b       ; hideCursor
010543 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
010548 ad 00 d0                            lda $d000             ; NPRM
01054b                                 ;; IF < 1 {
01054b c9 01                               cmp #$1
01054d b0 10                               bcs +16               ; IF1054b_end [1055f]
01054f 2f a9 5f 09 01                      lda.t #$1095f         ; NoFilenameErrStr
010554 2f 8d 00 d7                         sta.t $00d700
010558 4f 5c 20 00 ff                      jsr.a24 ($ff0020)     ; os4_PrintError
01055d 4f 60                               rts.a24
01055f                 IF1054b_end:
01055f 2f ad 04 d0                         lda.t $00d004         ; FILENAME
010563                                 ;; IF == {
010563 d0 0d                               bne +13               ; IF10563_end [10572]
010565 2f a9                               lda.t #$1095f         ; NoFilenameErrStr
010567 2f 8d 00 d7                         sta.t $00d700
01056b 4f 5c 20 00 ff                      jsr.a24 ($ff0020)     ; os4_PrintError
010570 4f 60                               rts.a24
010572                 IF10563_end:
010572 2f 8d 00 d6                         sta.t $00d600
010576 2f a9 41 09 01                      lda.t #$10941         ; BINFileType
01057b 2f 8d 03 d6                         sta.t $00d603
01057f 4f 5c 09 01 ff                      jsr.a24 ($ff0109)     ; os4_Disk4Create
010584                                 ;; IF != {
010584 f0 07                               beq +7                ; IF10584_end [1058d]
010586 4f 5c 1b 01 ff                      jsr.a24 ($ff011b)     ; os4_Disk4PrintError
01058b 4f 60                               rts.a24
01058d                 IF10584_end:
01058d 86 03                               stx $03               ; FN
01058f 8e f1 c0                            stx $c0f1             ; DISK4_PARAM0
010592 1f a5 88                            lda.w $88             ; FILESIZE
010595 1f 85 04                            sta.w $04             ; REMAINING
010598 2f 64 07                            stz.t $07             ; W_IDX
01059b                 LOOP1059b_start:
01059b                                 ;; LOOP {
01059b                 LOOP1059b_loop:
01059b 4f 5c 18 01 ff                      jsr.a24 ($ff0118)     ; os4_Disk4C800
0105a0 2f 64 0a                            stz.t $0a             ; C_IDX
0105a3                 LOOP105a3_start:
0105a3                                 ;; LOOP {
0105a3                 LOOP105a3_loop:
0105a3 2f a2 00 20 00                      ldx.t #$2000          ; LOADFILEHERE
0105a8 2f a4 07                            ldy.t $07             ; W_IDX
0105ab 4f ab                               lda.a24 XY
0105ad 2f e6 07                            inc.t $07             ; W_IDX
0105b0 1f a2 00 c8                         ldx.w #$c800          ; DISK4_RAM
0105b4 2f a4 0a                            ldy.t $0a             ; C_IDX
0105b7 4f bb                               sta.a24 XY
0105b9 2f e6 0a                            inc.t $0a             ; C_IDX
0105bc 2f a5 0a                            lda.t $0a             ; C_IDX
0105bf 2f c5 04                            cmp.t $04             ; REMAINING
0105c2                                 ;; IF == {
0105c2 d0 04                               bne +4                ; IF105c2_end [105c8]
0105c4                                 ;; BREAK
0105c4 4f 80 0d 00                         bra.a24 +13           ; loop105a3_end [105d5]
0105c8                 IF105c2_end:
0105c8 2f c9 00 04 00                      cmp.t #$400
0105cd                                 ;; IF == {
0105cd d0 04                               bne +4                ; IF105cd_end [105d3]
0105cf                                 ;; BREAK
0105cf 4f 80 02 00                         bra.a24 +2            ; loop105a3_end [105d5]
0105d3                 IF105cd_end:
0105d3 80 ce                               bra -50               ; LOOP105a3_loop [105a3]
0105d5                 LOOP105a3_end:
0105d5 2f 8d f4 c0                         sta.t $00c0f4         ; DISK4_PARAM1
0105d9 2f a5 04                            lda.t $04             ; REMAINING
0105dc 38                                  sec
0105dd e5 0a                               sbc $0a               ; C_IDX
0105df 1f 85 04                            sta.w $04             ; REMAINING
0105e2 4f 5c 15 01 ff                      jsr.a24 ($ff0115)     ; os4_Disk4Write
0105e7                                 ;; IF != {
0105e7 f0 09                               beq +9                ; IF105e7_end [105f2]
0105e9 4f 5c 1b 01 ff                      jsr.a24 ($ff011b)     ; os4_Disk4PrintError
0105ee                                 ;; BREAK
0105ee 4f 80 0b 00                         bra.a24 +11           ; loop1059b_end [105fd]
0105f2                 IF105e7_end:
0105f2 2f a5 04                            lda.t $04             ; REMAINING
0105f5                                 ;; IF == {
0105f5 d0 04                               bne +4                ; IF105f5_end [105fb]
0105f7                                 ;; BREAK
0105f7 4f 80 02 00                         bra.a24 +2            ; loop1059b_end [105fd]
0105fb                 IF105f5_end:
0105fb 80 9e                               bra -98               ; LOOP1059b_loop [1059b]
0105fd                 LOOP1059b_end:
0105fd a5 03                               lda $03               ; FN
0105ff 4f 5c 0f 01 ff                      jsr.a24 ($ff010f)     ; os4_Disk4Close
010604 2f a9 38 09 01                      lda.t #$10938         ; StoredStr
010609 2f 8d 00 d7                         sta.t $00d700
01060d 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
010612 2f ad 04 d0                         lda.t $00d004         ; FILENAME
010616 2f 8d 00 d7                         sta.t $00d700
01061a 4f 5c 1d 00 ff                      jsr.a24 ($ff001d)     ; os4_PrintString
01061f 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
010624 4f 5c 35 00 ff                      jsr.a24 ($ff0035)     ; os4_NextLine
010629 4f 60                               rts.a24

01062b ; SUB DoX:
00d000          ; VAR @NPRM
00d001          ; VAR @CMD
00d004          ; VAR @XPOS
01062b ad 00 d0                            lda $d000             ; NPRM
01062e                                 ;; IF < 1 {
01062e c9 01                               cmp #$1
010630 b0 10                               bcs +16               ; IF1062e_end [10642]
010632 2f a9 7d 09 01                      lda.t #$1097d         ; MissingValueErr
010637 2f 8d 00 d7                         sta.t $00d700
01063b 4f 5c 20 00 ff                      jsr.a24 ($ff0020)     ; os4_PrintError
010640 4f 60                               rts.a24
010642                 IF1062e_end:
010642 2f ad 04 d0                         lda.t $00d004         ; XPOS
010646 2f 8d 00 d7                         sta.t $00d700
01064a 4f 5c 56 00 ff                      jsr.a24 ($ff0056)     ; os4_ParseNumber
01064f c9 07                               cmp #$7
010651                                 ;; IF > {
010651 f0 04                               beq +4                ; IF10651_end [10657]
010653 90 02                               bcc +2                ; IF10651_end [10657]
010655 a9 07                               lda #$7
010657                 IF10651_end:
010657 8d 04 d0                            sta $d004             ; XPOS
01065a 4f 20 0b 03 01                      jsr.a24 $01030b       ; hideCursor
01065f ad 04 d0                            lda $d004             ; XPOS
010662 85 82                               sta $82               ; CURSORX
010664 4f 20 e6 02 01                      jsr.a24 $0102e6       ; drawCursor
010669 a9 00                               lda #$0
01066b 4f 60                               rts.a24

01066d ; SUB DoY:
00d000          ; VAR @NPRM
00d001          ; VAR @CMD
00d004          ; VAR @YPOS
01066d ad 00 d0                            lda $d000             ; NPRM
010670                                 ;; IF < 1 {
010670 c9 01                               cmp #$1
010672 b0 10                               bcs +16               ; IF10670_end [10684]
010674 2f a9 7d 09 01                      lda.t #$1097d         ; MissingValueErr
010679 2f 8d 00 d7                         sta.t $00d700
01067d 4f 5c 20 00 ff                      jsr.a24 ($ff0020)     ; os4_PrintError
010682 4f 60                               rts.a24
010684                 IF10670_end:
010684 2f ad 04 d0                         lda.t $00d004         ; YPOS
010688 2f 8d 00 d7                         sta.t $00d700
01068c 4f 5c 56 00 ff                      jsr.a24 ($ff0056)     ; os4_ParseNumber
010691 c5 8a                               cmp $8a               ; NFILEROWS
010693                                 ;; IF >= {
010693 90 05                               bcc +5                ; IF10693_end [1069a]
010695 1f a5 8a                            lda.w $8a             ; NFILEROWS
010698 1f 3a                               dec.w
01069a                 IF10693_end:
01069a 8d 04 d0                            sta $d004             ; YPOS
01069d 4f 20 0b 03 01                      jsr.a24 $01030b       ; hideCursor
0106a2 ad 04 d0                            lda $d004             ; YPOS
0106a5 85 83                               sta $83               ; CURSORY
0106a7 4f 20 e6 02 01                      jsr.a24 $0102e6       ; drawCursor
0106ac a9 00                               lda #$0
0106ae 4f 60                               rts.a24

0106b0 ; SUB DoQuit:
0106b0 a9 00                               lda #$0               ; DISP_TEXT_1
0106b2 4f 5c 08 00 ff                      jsr.a24 ($ff0008)     ; os4_SetScreenMode
0106b7 a9 ff                               lda #$ff
0106b9 4f 60                               rts.a24

0106bb ; SUB CommandLine:
000004          ; VAR @I
000005          ; VAR @I6
0106bb ad 00 01                            lda $0100             ; INPBUFFER
0106be                                 ;; IF == {
0106be d0 02                               bne +2                ; IF106be_end [106c2]
0106c0 4f 60                               rts.a24
0106c2                 IF106be_end:
0106c2 2f a9 00 01 00                      lda.t #$100           ; INPBUFFER
0106c7 2f 8d 00 d7                         sta.t $00d700
0106cb 4f 5c 53 00 ff                      jsr.a24 ($ff0053)     ; os4_ParseInputParams
0106d0 2f ad 01 d0                         lda.t $00d001
0106d4 2f 8d 00 d7                         sta.t $00d700
0106d8                 FOR106d8_start:
0106d8                                 ;; FOR @I = 0 TO 5 {
0106d8 a2 00                               ldx #$0
0106da 86 04                               stx $04
0106dc                 FOR106d8_loop:
0106dc a5 04                               lda $04               ; I
0106de                       ;; A <<= 2 
0106de 0a                                  asl
0106df 0a                                  asl
0106e0 85 05                               sta $05               ; I6
0106e2 a5 04                               lda $04               ; I
0106e4                       ;; A <<= 1 
0106e4 0a                                  asl
0106e5 18                                  clc
0106e6 65 05                               adc $05               ; I6
0106e8 85 05                               sta $05               ; I6
0106ea aa                                  tax
0106eb 6f bd 15 0a 01                      lda.t.a24 $010a15,X   ; CommandList
0106f0 2f 8d 03 d7                         sta.t $00d703
0106f4 4f 5c 47 00 ff                      jsr.a24 ($ff0047)     ; os4_CompareText
0106f9                                 ;; IF - {
0106f9 10 14                               bpl +20               ; IF106f9_end [1070f]
0106fb a6 05                               ldx $05               ; I6
0106fd 6f bd 18 0a 01                      lda.t.a24 $010a18,X   ; CommandList
010702 2f 85 00                            sta.t $00
010705 4f 5c 00 00 00                      jsr.a24 ($00)
01070a 8d ff d0                            sta $d0ff
01070d 4f 60                               rts.a24
01070f                 IF106f9_end:
01070f e6 04                               inc $04
010711 a6 04                               ldx $04
010713 e0 06                               cpx #$6
010715 d0 c5                               bne -59               ; FOR106d8_loop [106dc]
010717                 FOR106d8_end:
010717 2f a9 45 09 01                      lda.t #$10945         ; UnknownCommandErr
01071c 2f 8d 00 d7                         sta.t $00d700
010720 4f 5c 20 00 ff                      jsr.a24 ($ff0020)     ; os4_PrintError
010725 9c ff d0                            stz $d0ff
010728 4f 60                               rts.a24

01072a ; SUB CompleteCommand:
000004          ; VAR @I
000005          ; VAR @I6
01072a 1f a9 00 01                         lda.w #$100           ; INPBUFFER
01072e 2f 8d 00 d7                         sta.t $00d700
010732                 FOR10732_start:
010732                                 ;; FOR @I = 0 TO 5 {
010732 a2 00                               ldx #$0
010734 86 04                               stx $04
010736                 FOR10732_loop:
010736 a5 04                               lda $04               ; I
010738                       ;; A <<= 2 
010738 0a                                  asl
010739 0a                                  asl
01073a 85 05                               sta $05               ; I6
01073c a5 04                               lda $04               ; I
01073e                       ;; A <<= 1 
01073e 0a                                  asl
01073f 18                                  clc
010740 65 05                               adc $05               ; I6
010742 85 05                               sta $05               ; I6
010744 aa                                  tax
010745 6f bd 15 0a 01                      lda.t.a24 $010a15,X   ; CommandList
01074a 2f 8d 03 d7                         sta.t $00d703
01074e 4f 5c 4a 00 ff                      jsr.a24 ($ff004a)     ; os4_CompareStartOfText
010753                                 ;; IF - {
010753 10 34                               bpl +52               ; IF10753_end [10789]
010755 a6 05                               ldx $05               ; I6
010757 6f bd 15 0a 01                      lda.t.a24 $010a15,X   ; CommandList
01075c 2f 8d 00 d7                         sta.t $00d700
010760 1f a9 00 01                         lda.w #$100           ; INPBUFFER
010764 2f 8d 03 d7                         sta.t $00d703
010768 4f 5c 4d 00 ff                      jsr.a24 ($ff004d)     ; os4_CopyString
01076d 1f a5 fe                            lda.w $fe             ; TXTPTR
010770 1f 1a                               inc.w
010772 1f 1a                               inc.w
010774 2f 8d 03 d7                         sta.t $00d703
010778 4f 5c 50 00 ff                      jsr.a24 ($ff0050)     ; os4_CopyStringHigh
01077d c8                                  iny
01077e c8                                  iny
01077f 8c 01 ff                            sty $ff01             ; TXTPOS
010782 4f 5c 17 00 ff                      jsr.a24 ($ff0017)     ; os4_PrintCursor
010787 4f 60                               rts.a24
010789                 IF10753_end:
010789 e6 04                               inc $04
01078b a6 04                               ldx $04
01078d e0 06                               cpx #$6
01078f d0 a5                               bne -91               ; FOR10732_loop [10736]
010791                 FOR10732_end:
010791 4f 60                               rts.a24

010793 ; SUB ClearInputBuffers:
010793 a9 00                               lda #$0
010795                 FOR10795_start:
010795                                 ;; FOR X = 0 TO 255 {
010795 a2 00                               ldx #$0
010797                 FOR10795_loop:
010797 9d 00 01                            sta $0100,X           ; INPBUFFER
01079a e8                                  inx
01079b e0 00                               cpx #$100
01079d d0 f8                               bne -8                ; FOR10795_loop [10797]
01079f                 FOR10795_end:
01079f 4f 60                               rts.a24

0107a1 ; SUB ClearCurrentInputBuffer:
0107a1 a9 00                               lda #$0
0107a3                 FOR107a3_start:
0107a3                                 ;; FOR X = 0 TO 79 {
0107a3 a2 00                               ldx #$0
0107a5                 FOR107a3_loop:
0107a5 9d 00 01                            sta $0100,X           ; INPBUFFER
0107a8 e8                                  inx
0107a9 e0 50                               cpx #$50
0107ab d0 f8                               bne -8                ; FOR107a3_loop [107a5]
0107ad                 FOR107a3_end:
0107ad 4f 60                               rts.a24

0107af ; SUB PrevToCurrentInputBuffer:
0107af                 FOR107af_start:
0107af                                 ;; FOR X = 0 TO 79 {
0107af a2 00                               ldx #$0
0107b1                 FOR107af_loop:
0107b1 bd 50 01                            lda $0150,X           ; INPBUFFER2
0107b4 9d 00 01                            sta $0100,X           ; INPBUFFER
0107b7 bd a0 01                            lda $01a0,X           ; INPBUFFER3
0107ba 9d 50 01                            sta $0150,X           ; INPBUFFER2
0107bd e8                                  inx
0107be e0 50                               cpx #$50
0107c0 d0 ef                               bne -17               ; FOR107af_loop [107b1]
0107c2                 FOR107af_end:
0107c2 4f 60                               rts.a24

0107c4 ; SUB CurrentToPrevInputBuffer:
0107c4                 FOR107c4_start:
0107c4                                 ;; FOR X = 0 TO 79 {
0107c4 a2 00                               ldx #$0
0107c6                 FOR107c4_loop:
0107c6 bd 50 01                            lda $0150,X           ; INPBUFFER2
0107c9 9d a0 01                            sta $01a0,X           ; INPBUFFER3
0107cc bd 00 01                            lda $0100,X           ; INPBUFFER
0107cf 9d 50 01                            sta $0150,X           ; INPBUFFER2
0107d2 e8                                  inx
0107d3 e0 50                               cpx #$50
0107d5 d0 ef                               bne -17               ; FOR107c4_loop [107c6]
0107d7                 FOR107c4_end:
0107d7 4f 60                               rts.a24

0107d9 ; SUB InputBufferToTextScreen:
0107d9 a0 03                               ldy #$3
0107db                 FOR107db_start:
0107db                                 ;; FOR X = 0 TO 79 {
0107db a2 00                               ldx #$0
0107dd                 FOR107db_loop:
0107dd bd 00 01                            lda $0100,X           ; INPBUFFER
0107e0                                 ;; IF == 0 {
0107e0 c9 00                               cmp #$0
0107e2 d0 07                               bne +7                ; IF107e0_end [107eb]
0107e4 8c 01 ff                            sty $ff01             ; TXTPOS
0107e7                                 ;; BREAK
0107e7 4f 80 0a 00                         bra.a24 +10           ; for107db_end [107f5]
0107eb                 IF107e0_end:
0107eb 09 80                               ora #$80
0107ed 91 fe                               sta ($fe),Y           ; TXTPTR
0107ef c8                                  iny
0107f0 e8                                  inx
0107f1 e0 50                               cpx #$50
0107f3 d0 e8                               bne -24               ; FOR107db_loop [107dd]
0107f5                 FOR107db_end:
0107f5 a9 a0                               lda #$a0
0107f7                 LOOP107f7_start:
0107f7                                 ;; LOOP {
0107f7                 LOOP107f7_loop:
0107f7 c0 28                               cpy #$28
0107f9                                 ;; IF == {
0107f9 d0 04                               bne +4                ; IF107f9_end [107ff]
0107fb                                 ;; BREAK
0107fb 4f 80 05 00                         bra.a24 +5            ; loop107f7_end [10804]
0107ff                 IF107f9_end:
0107ff 91 fe                               sta ($fe),Y           ; TXTPTR
010801 c8                                  iny
010802 80 f3                               bra -13               ; LOOP107f7_loop [107f7]
010804                 LOOP107f7_end:
010804 4f 60                               rts.a24

010806 ; SUB calculateRows:
010806 1f a5 88                            lda.w $88             ; FILESIZE
010809 18                                  clc
01080a 1f 69 07 00                         adc.w #$7
01080e 1f 4a                               lsr.w
010810 1f 4a                               lsr.w
010812 1f 4a                               lsr.w
010814 1f 85 8a                            sta.w $8a             ; NFILEROWS
010817 4f 60                               rts.a24

010819 ; SUB clearText2Screen:
0000fb-0000fc   ; VAR @ROWPTR
010819 a2 00                               ldx #$0
01081b                 DO1081b_start:
01081b                                 ;; DO {
01081b                 DO1081b_loop:
01081b 5f bd cf 09 01                      lda.w.a24 $0109cf,X   ; Text2ScreenBase
010820 1f 85 fb                            sta.w $fb             ; ROWPTR
010823 a9 a0                               lda #$a0
010825                 FOR10825_start:
010825                                 ;; FOR Y = 0 TO 39 {
010825 a0 00                               ldy #$0
010827                 FOR10825_loop:
010827 91 fb                               sta ($fb),Y           ; ROWPTR
010829 c8                                  iny
01082a c0 28                               cpy #$28
01082c d0 f9                               bne -7                ; FOR10825_loop [10827]
01082e                 FOR10825_end:
01082e e8                                  inx
01082f e8                                  inx
010830 e0 30                               cpx #$30
010832                                 ;; WHILE !=
010832 f0 02                               beq +2                ; DO1081b_end [10836]
010834 80 e5                               bra -27               ; DO1081b_loop [1081b]
010836                 DO1081b_end:
010836 4f 60                               rts.a24

010838 ; SUB debugValueA:
010838 48                                  pha
010839 48                                  pha
01083a                       ;; A >>= 4 
01083a 4a                                  lsr
01083b 4a                                  lsr
01083c 4a                                  lsr
01083d 4a                                  lsr
01083e                                 ;; IF >= 10 {
01083e c9 0a                               cmp #$a
010840 90 05                               bcc +5                ; IF1083e_else [10847]
010842                       ;; A += 183 
010842 18                                  clc
010843 69 b7                               adc #$b7
010845 80 03                               bra +3                ; IF1083e_end [1084a]
010847                 IF1083e_else:
010847                                 ;; ELSE
010847                       ;; A += 176 
010847 18                                  clc
010848 69 b0                               adc #$b0
01084a                 IF1083e_end:
01084a 8d 26 04                            sta $0426
01084d 68                                  pla
01084e                       ;; A &= 15 
01084e 29 0f                               and #$f
010850                                 ;; IF >= 10 {
010850 c9 0a                               cmp #$a
010852 90 05                               bcc +5                ; IF10850_else [10859]
010854                       ;; A += 183 
010854 18                                  clc
010855 69 b7                               adc #$b7
010857 80 03                               bra +3                ; IF10850_end [1085c]
010859                 IF10850_else:
010859                                 ;; ELSE
010859                       ;; A += 176 
010859 18                                  clc
01085a 69 b0                               adc #$b0
01085c                 IF10850_end:
01085c 8d 27 04                            sta $0427
01085f 68                                  pla
010860 4f 60                               rts.a24

010862 ; SUB debugValueB:
010862 48                                  pha
010863 48                                  pha
010864                       ;; A >>= 4 
010864 4a                                  lsr
010865 4a                                  lsr
010866 4a                                  lsr
010867 4a                                  lsr
010868                                 ;; IF >= 10 {
010868 c9 0a                               cmp #$a
01086a 90 05                               bcc +5                ; IF10868_else [10871]
01086c                       ;; A += 183 
01086c 18                                  clc
01086d 69 b7                               adc #$b7
01086f 80 03                               bra +3                ; IF10868_end [10874]
010871                 IF10868_else:
010871                                 ;; ELSE
010871                       ;; A += 176 
010871 18                                  clc
010872 69 b0                               adc #$b0
010874                 IF10868_end:
010874 8d 23 04                            sta $0423
010877 68                                  pla
010878                       ;; A &= 15 
010878 29 0f                               and #$f
01087a                                 ;; IF >= 10 {
01087a c9 0a                               cmp #$a
01087c 90 05                               bcc +5                ; IF1087a_else [10883]
01087e                       ;; A += 183 
01087e 18                                  clc
01087f 69 b7                               adc #$b7
010881 80 03                               bra +3                ; IF1087a_end [10886]
010883                 IF1087a_else:
010883                                 ;; ELSE
010883                       ;; A += 176 
010883 18                                  clc
010884 69 b0                               adc #$b0
010886                 IF1087a_end:
010886 8d 24 04                            sta $0424
010889 68                                  pla
01088a 4f 60                               rts.a24

01088c ; SUB debugValueC:
01088c 48                                  pha
01088d 48                                  pha
01088e                       ;; A >>= 4 
01088e 4a                                  lsr
01088f 4a                                  lsr
010890 4a                                  lsr
010891 4a                                  lsr
010892                                 ;; IF >= 10 {
010892 c9 0a                               cmp #$a
010894 90 05                               bcc +5                ; IF10892_else [1089b]
010896                       ;; A += 183 
010896 18                                  clc
010897 69 b7                               adc #$b7
010899 80 03                               bra +3                ; IF10892_end [1089e]
01089b                 IF10892_else:
01089b                                 ;; ELSE
01089b                       ;; A += 176 
01089b 18                                  clc
01089c 69 b0                               adc #$b0
01089e                 IF10892_end:
01089e 8d 20 04                            sta $0420
0108a1 68                                  pla
0108a2                       ;; A &= 15 
0108a2 29 0f                               and #$f
0108a4                                 ;; IF >= 10 {
0108a4 c9 0a                               cmp #$a
0108a6 90 05                               bcc +5                ; IF108a4_else [108ad]
0108a8                       ;; A += 183 
0108a8 18                                  clc
0108a9 69 b7                               adc #$b7
0108ab 80 03                               bra +3                ; IF108a4_end [108b0]
0108ad                 IF108a4_else:
0108ad                                 ;; ELSE
0108ad                       ;; A += 176 
0108ad 18                                  clc
0108ae 69 b0                               adc #$b0
0108b0                 IF108a4_end:
0108b0 8d 21 04                            sta $0421
0108b3 68                                  pla
0108b4 4f 60                               rts.a24

0108b6 ; DATA Header:
0108b6 42 49 4e 2d 45 64 69 74 20 5d 5b 34 20 2d 20 61 20 42 49 4e 20 66 69 6c 65 20 65 64 69 74 6f 72 00

0108d7 ; DATA EditingStr:
0108d7 2d 2d 20 45 44 49 54 49 4e 47 20 2d 2d 00

0108e5 ; DATA HelpEditStr:
0108e5 20 45 4e 54 45 52 20 2d 20 45 64 69 74 20 76 61 6c 75 65 00

0108f9 ; DATA HelpUDLRStr:
0108f9 20 75 70 2f 64 6f 77 6e 2f 6c 65 66 74 2f 72 69 67 68 74 20 2d 20 4d 6f 76 65 20 43 75 72 73 6f 72 00

01091b ; DATA HelpListStr:
01091b 20 42 49 4e 2d 45 64 69 74 20 43 4f 4d 4d 41 4e 44 53 3a 00

01092f ; DATA LoadedStr:
01092f 4c 4f 41 44 45 44 3a 20 00

010938 ; DATA StoredStr:
010938 53 54 4f 52 45 44 3a 20 00

010941 ; DATA BINFileType:
010941 42 49 4e 00

010945 ; DATA UnknownCommandErr:
010945 2a 2a 20 45 52 52 4f 52 3a 20 55 6e 6b 6e 6f 77 6e 20 63 6f 6d 6d 61 6e 64 00

01095f ; DATA NoFilenameErrStr:
01095f 2a 2a 20 46 49 4c 45 4e 41 4d 45 20 6d 75 73 74 20 62 65 20 73 70 65 63 69 66 69 65 64 00

01097d ; DATA MissingValueErr:
01097d 2a 2a 20 45 52 52 4f 52 3a 20 4d 69 73 73 69 6e 67 20 56 41 4c 55 45 00

010995 ; DATA MissingStartErr:
010995 2a 2a 20 45 52 52 4f 52 3a 20 4d 69 73 73 69 6e 67 20 53 54 41 52 54 20 76 61 6c 75 65 00

0109b3 ; DATA MissingEndErr:
0109b3 2a 2a 20 45 52 52 4f 52 3a 20 4d 69 73 73 69 6e 67 20 45 4e 44 20 76 61 6c 75 65 00

0109cf ; DATA Text2ScreenBase:
0109cf 00 08
0109d1 80 08
0109d3 00 09
0109d5 80 09
0109d7 00 0a
0109d9 80 0a
0109db 00 0b
0109dd 80 0b
0109df 28 08
0109e1 a8 08
0109e3 28 09
0109e5 a8 09
0109e7 28 0a
0109e9 a8 0a
0109eb 28 0b
0109ed a8 0b
0109ef 50 08
0109f1 d0 08
0109f3 50 09
0109f5 d0 09
0109f7 50 0a
0109f9 d0 0a
0109fb 50 0b
0109fd d0 0b

0109ff ; DATA CMD_Help:
0109ff 3f 00

010a01 ; DATA CMD_Load:
010a01 6c 6f 61 64 00

010a06 ; DATA CMD_Store:
010a06 73 74 6f 72 65 00

010a0c ; DATA CMD_X:
010a0c 78 00

010a0e ; DATA CMD_Y:
010a0e 79 00

010a10 ; DATA CMD_Quit:
010a10 71 75 69 74 00

010a15 ; DATA CommandList:
010a15 ff 09 01
010a18 84 03 01
010a1b 01 0a 01
010a1e 71 04 01
010a21 06 0a 01
010a24 3e 05 01
010a27 0c 0a 01
010a2a 2b 06 01
010a2d 0e 0a 01
010a30 6d 06 01
010a33 10 0a 01
010a36 b0 06 01
